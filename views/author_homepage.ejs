<!doctype html>
<html> 
    <head>
        <title> <%= title %> </title>
        <link rel="stylesheet" href="/main.css" type="text/css">
    </head>
    <body class="bg-yellow-100">
        <nav class="bg-gray-800">
            <div class="mx-auto max-w-7xl px-2">
                <div class="relative flex h-16 items-center justify-between">
                    <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
                        <div class="hidden sm:block">
                            <div class="flex space-x-4">
                                <a href="/author/home" class="text-white hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium">Home</a>
                                <a href="/author/settings" class="text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium">Settings</a>
                                <a href="/author/logout" class="text-gray-300 hover:bg-gray-700 hover:text-white rounded-md px-3 py-2 text-sm font-medium">Sign out</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        
        <h2 class="mx-auto max-w-7xl text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight mt-5"><%= title %></h2>

        <div class="py-12 sm:py-16">
            <div class="mx-auto max-w-7xl flex items-center justify-center">
                <div class="mx-auto max-w-2xl lg:mx-0 text-center">
                    <h2 class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"><%= blogtitle %></h2>
                    <h2 class="text-2xl font-medium tracking-tight text-gray-900 sm:text-2xl"><%= blogsubtitle %></h2>
                    <h2 class="mt-2 text-lg leading-8 text-gray-600"><%= author_first %> <%= author_last %></h3>
                </div>
            </div>
        </div>
        
        <div class="py-12 sm:py-16">
            <div class="mx-auto max-w-7xl">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-medium tracking-tight text-gray-900 sm:text-2xl">Drafts</h2>
                    <span class="inline-flex items-center rounded-md bg-gray-900 px-2 py-1 text-md font-medium text-yellow-100 ring-1 ring-inset ring-gray-500/10"><a href="/draft">Create new draft</a></span>
                </div>
                <div class="mx-auto mt-5 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 border-t border-gray-900 pt-10 sm:pt-16 lg:mx-0 lg:max-w-none lg:grid-cols-3">
                    <% articles.forEach(article => { %>
                        <% if(article.published == 0){ %>
                        <article class="flex max-w-xl flex-col items-start justify-between">
                            <a href="/author/article/<%= article.id %>">
                                <div class="flex items-center gap-x-4 text-xs">
                                    <p>Created: <%= article.created %></p>
                                    <p>Last modified: <%= article.modified %></p>
                                </div>
                                <div class="group relative">
                                    <h3 class="mt-3 text-lg font-semibold leading-6 text-gray-900 group-hover:text-gray-600">
                                        <span class="absolute inset-0"></span>
                                        Title: <%= article.title %>
                                    </h3>
                                    <% if(article.subtitle){ %>
                                    <h4 class="mt-1 text-md font-semibold leading-6 text-gray-900 group-hover:text-gray-600">
                                        <span class="absolute inset-0"></span>
                                        Subtitle: <%= article.subtitle %>
                                    </h4>
                                    <% } %>
                                </div>
                            </a>
                            <div class="flex items-center justify-between space-x-2 mt-3">
                                <span class="inline-flex items-center rounded-md bg-indigo-50 px-2 py-1 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-700/10">
                                    <a href="/publish/<%= article.id %>">Publish</a>
                                </span>
                                <span class="inline-flex items-center rounded-md bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20">
                                    <a href="/author/article/<%= article.id %>">Edit</a>
                                </span>
                                <span class="inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/10">
                                    <a href="/delete/<%= article.id %>">Delete</a>
                                </span>
                            </div>
                            
                        </article>
                        <% } %>
                    <% }); %>                    
              
                  </div>
            </div>
        </div>
        <div class="py-12 sm:py-16">
            <div class="mx-auto max-w-7xl">
                <div class="flex items-center justify-between">
                    <h2 class="text-2xl font-medium tracking-tight text-gray-900 sm:text-2xl">Published</h2>
                </div>
                <div class="mx-auto mt-5 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 border-t border-gray-900 pt-10 sm:pt-16 lg:mx-0 lg:max-w-none lg:grid-cols-3">
                    <% articles.forEach(article => { %>
                        <% if(article.published == 1){ %>
                        <article class="flex max-w-xl flex-col items-start justify-between">
                            <a href="/author/article/<%= article.id %>">
                                <div class="flex items-center gap-x-4 text-xs">
                                    <p>Created: <%= article.created %></p>
                                    <p>Last modified: <%= article.modified %></p>
                                    <p>Published: <%= article.published_time %></p>
                                </div>
                                <div class="group relative">
                                    <h3 class="mt-3 text-lg font-semibold leading-6 text-gray-900 group-hover:text-gray-600">
                                        <span class="absolute inset-0"></span>
                                        Title: <%= article.title %>
                                    </h3>
                                    <% if(article.subtitle){ %>
                                    <h4 class="mt-1 text-md font-semibold leading-6 text-gray-900 group-hover:text-gray-600">
                                        <span class="absolute inset-0"></span>
                                        Subtitle: <%= article.subtitle %>
                                    </h4>
                                    <% } %>
                                </div>
                            </a>
                            <div class="flex items-center justify-between space-x-2 mt-3">
                                <span class="inline-flex items-center rounded-md bg-indigo-50 px-2 py-1 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-700/10">
                                    <button onclick="showModal('<%= article.id %>')">Share</button>
                                </span>
                                <div id="modal<%= article.id %>" class="hidden fixed bottom-4 left-4 max-w-sm p-6 bg-gray-900 border border-gray-300 rounded shadow-md transform translate-y-4 opacity-0 transition-transform transition-opacity duration-300 ease-in-out">
                                    <p class="text-md font-semibold leading-6 mb-4 text-yellow-100">http://localhost:3000/reader/article/<%= article.id %></p>
                                    <button onclick="okay('<%= article.id %>')" class="flex justify-end bg-yellow-100 text-gray-900 px-4 py-2 rounded-md hover:bg-gray-700 transition-colors duration-300 ml-auto focus:outline-none">OK</button>
                                </div>
                                <script>
                                    function okay(articleId) {
                                        const modal = document.getElementById(`modal${articleId}`);
                                        modal.style.opacity = '0';
                                        modal.style.transform = 'translateY(4rem)';
                                        setTimeout(() => {
                                            modal.style.display = 'none';
                                        }, 300);
                                    }
                                
                                    function showModal(articleId) {
                                        const modal = document.getElementById(`modal${articleId}`);
                                        modal.style.display = 'block';
                                        modal.style.opacity = '1';
                                        modal.style.transform = 'translateY(0)';
                                    }
                                </script>
                                  
                                <span class="inline-flex items-center rounded-md bg-red-50 px-2 py-1 text-xs font-medium text-red-700 ring-1 ring-inset ring-red-600/10">
                                    <a href="/delete/<%= article.id %>">Delete</a>
                                </span>
                            </div>
    
                        </article>
                        <% } %>
                    <% }); %>                    
              
                  </div>
            </div>
        </div>
    </body> 
</html>
